{% extends 'base.html.twig' %}

{% block title %}Liste des Articles{% endblock %}

{% block body %}
<div class="container mx-auto px-4 py-6">
    <h1 class="text-3xl font-bold text-center text-gray-800 mb-6">Liste des Articles</h1>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for article in articles %}
            <div class="bg-white shadow-lg rounded-lg overflow-hidden transform transition duration-300 hover:scale-105">
                <a href="{{ path('app_articles_show', {'id': article.id}) }}">
                    
                    {# Vérification et affichage de l'image de l'article #}
                    <img src="{{ article.imageUrl ? asset('uploads/articles/' ~ article.imageUrl) : asset('assets/default-image.jpg') }}" 
                         alt="{{ article.name }}" 
                         class="w-full h-64 object-cover"
                         onerror="this.src='{{ asset('asset/default-image.jpg') }}'"/>

                    <div class="p-4">
                        <h4 class="text-lg font-semibold text-gray-900">{{ article.name }}</h4>
                        <p class="text-gray-600 font-medium mt-2">Prix : <span class="text-indigo-600 font-bold">{{ article.price }} €</span></p>

                        <p class="mt-2">
                            <strong class="text-gray-700">Disponibilité :</strong> 
                            {% if article.stock and article.stock.quantity > 0 %}
                                <span class="text-green-600 font-semibold">Disponible</span>
                            {% else %}
                                <span class="text-red-600 font-semibold">Indisponible</span>
                            {% endif %}
                        </p>
                    </div>
                </a>
                <div class="p-4">
                    <a href="/cart/add-to-cart/{{ article.id }}"
                       class="block text-center bg-indigo-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-indigo-700 transition duration-300">
                        Ajouter au panier
                    </a>
                </div>
            </div>
        {% else %}
            <p class="text-center text-gray-500 col-span-full">Aucun article disponible.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}
